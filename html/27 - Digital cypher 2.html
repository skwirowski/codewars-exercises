<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Digital cypher vol. 2</title>
  </head>
  <body>
    <p>
      <b>Description:</b>
      <br />
      <br />
      Digital Cypher assigns to each letter of the alphabet unique number. For example:
    </p>
    <pre>
  a  b  c  d  e  f  g  h  i  j  k  l  m
  1  2  3  4  5  6  7  8  9 10 11 12 13
  n  o  p  q  r  s  t  u  v  w  x  y  z
  14 15 16 17 18 19 20 21 22 23 24 25 26
</pre
    >
    <p>Instead of letters in encrypted word we write the corresponding number, eg. The word scout:</p>
    <pre>
  s  c  o  u  t
  19  3 15 21 20
</pre
    >
    <p>
      Then we add to each obtained digit consecutive digits from the key. For example. In case of key equal to
      <i>1939</i> :
    </p>
    <pre>
  s   c   o   u   t
  19  3  15  21  20
+ 1   9   3   9   1
---------------
  20 12 18 30 21

  m   a   s   t   e   r   p  i  e  c  e
  13  1  19  20   5  18  16  9  5  3  5
+ 1   9   3   9   1   9   3  9  1  9  3
  --------------------------------
  14 10 22 29  6 27 19 18  6  12 8
</pre
    >
    <p>
      <b>Task:</b>
      <br />
      Write a function that accepts an array of integers <i>code</i> and a <i>key</i> number. As the result, it should
      return string containg a decoded message from the <i>code</i>.
      <br />
      <br />
      <b>Input / Output:</b>
      <br />
      The <i>code</i> is a array of positive integers.
      <br />
      The <i>key</i> input number is a positive integer.
    </p>
    <p>
      <b>Example:</b>
    </p>
    <pre>
decode([ 20, 12, 18, 30, 21],1939);  ==> "scout"
decode([ 14, 10, 22, 29, 6, 27, 19, 18, 6, 12, 8],1939);  ==>  "masterpiece"
</pre
    >

    <script>
      const exCode = [20, 12, 18, 30, 21];
      const exKey = 1939;

      const decode = (code, n) => {
        const key = String(n);
        const arr = [...code].map((item, index) => item - Number(key[index % key.length]) + 96);
        return arr.map((item) => String.fromCharCode(item)).join('');
      };

      console.log(decode(exCode, exKey));

      // My favorite solutions from codewars
      //
      // function decode(code, n) {
      //   const key = String(n)
      //   return String.fromCharCode(...code.map((c, i) => c - Number(key[i % key.length]) + 96))
      // }
      //
      // const decode = (code, n, k = `${n}`) =>
      //   String.fromCharCode(...code.map((m, i) => m - k[i % k.length] + 96))
    </script>
  </body>
</html>
